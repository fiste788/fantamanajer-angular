@let matchday = matchday$ | async;
@let _mode = mode();
@let team = team$ | async;
@let championship = championship$ | async;
@let loggedIn = loggedIn$ | async;
<mat-nav-list
  [ngClass]="size()"
  [@listItemAnimation]="size()"
>
  @if (_mode === 'drawer' && matchday) {
    <h3 mat-subheader>
      <span>
        @if (!matchday.season.ended && matchday.season.started) {
          Giornata {{ matchday.number }}
        } @else {
          {{ matchday.season.name }}
        }
      </span>
    </h3>
  }
  <a
    #rla1="routerLinkActive"
    mat-list-item
    routerLink="/"
    routerLinkActive
    [routerLinkActiveOptions]="{ exact: true }"
    [activated]="rla1.isActive"
  >
    <mat-icon
      matListItemIcon
      matRipple
      [matRippleDisabled]="_mode === 'drawer'"
      >home</mat-icon
    >Home
  </a>
  @if (team) {
    <a
      #rla2="routerLinkActive"
      mat-list-item
      routerLinkActive
      [activated]="rla2.isActive"
      [routerLink]="['teams', team.id]"
    >
      <mat-icon
        matListItemIcon
        matRipple
        [matRippleDisabled]="_mode === 'drawer'"
        >groups_3</mat-icon
      >{{ _mode === 'drawer' ? team.name : 'Squadra' }}
    </a>
  }
  @if (championship) {
    <a
      #rla3="routerLinkActive"
      mat-list-item
      routerLinkActive
      [activated]="rla3.isActive"
      [routerLink]="['championships', championship.id]"
    >
      <mat-icon
        matListItemIcon
        matRipple
        [matRippleDisabled]="_mode === 'drawer'"
        >emoji_events</mat-icon
      >{{ _mode === 'drawer' ? championship.league.name : 'Lega' }}
    </a>
  }
  @if (_mode === 'drawer' || (_mode === 'bar' && !loggedIn)) {
    <a
      #rla4="routerLinkActive"
      mat-list-item
      routerLink="/clubs"
      routerLinkActive
      [activated]="rla4.isActive"
    >
      <mat-icon
        matListItemIcon
        matRipple
        [matRippleDisabled]="_mode === 'drawer'"
        >sports_soccer</mat-icon
      >Clubs
    </a>
  }
  @if (_mode === 'drawer') {
    <mat-divider />
    <h3 mat-subheader>Account</h3>
  }
  @if (loggedIn) {
    <a
      #rla5="routerLinkActive"
      mat-list-item
      routerLink="/user"
      routerLinkActive
      [activated]="rla5.isActive"
    >
      <mat-icon
        matListItemIcon
        matRipple
        [matRippleDisabled]="_mode === 'drawer'"
        >account_circle</mat-icon
      >{{ _mode === 'drawer' ? 'Profilo' : 'Io' }}
    </a>
    @if (_mode === 'drawer') {
      <a
        #rla6="routerLinkActive"
        mat-list-item
        routerLink="/auth/logout"
        routerLinkActive
        [activated]="rla6.isActive"
      >
        <mat-icon
          matListItemIcon
          matRipple
          [matRippleDisabled]="_mode === 'drawer'"
          >exit_to_app</mat-icon
        >Log Out
      </a>
    }
  } @else {
    <a
      #rla7="routerLinkActive"
      mat-list-item
      routerLink="/auth/login"
      routerLinkActive
      [activated]="rla7.isActive"
    >
      <mat-icon
        matListItemIcon
        matRipple
        [matRippleDisabled]="_mode === 'drawer'"
        >input</mat-icon
      >Log In
    </a>
  }
</mat-nav-list>
